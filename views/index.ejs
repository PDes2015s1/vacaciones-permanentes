<html>
  <head>
    <title>Vacaciones permanentes</title>
    <link href="/bower/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="/bower/angular/angular.js"></script>
    <script src="/bower/angular-ui-router/release/angular-ui-router.js"></script>
    <script src="/javascripts/angularApp.js"></script>
    <script src="/bower/moment/moment.js"></script>
    <script src="/bower/angular-moment/angular-moment.js"></script>
    <style> .glyphicon-thumbs-up { cursor:pointer } </style>
  </head>
  <!-- rest of template -->
  <body ng-app="flapperNews" ng-controller="MainCtrl" class="container">
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Vacaciones permanentes</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="/">Home</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right" ng-controller="NavCtrl">
            <li ng-show="isLoggedIn()"><a>{{ currentUser() }}</a></li>
            <li ng-show="isLoggedIn()"><a href="" ng-click="logOut()">Log Out</a></li>
            <li ng-hide="isLoggedIn()"><a href="/#/login">Log In</a></li>
            <li ng-hide="isLoggedIn()"><a href="/#/register">Registrar</a></li>
          </ul>
        </div>
        <!--/.nav-collapse -->
      </div>
      <!--/.container-fluid -->
    </nav>
    <div>
      <ui-view></ui-view>
    </div>
    <script type="text/ng-template" id="/travels.html">
      <div class="page-header" >
        <div class="page-header" ng-show="isLoggedIn()" >
          <h1>Mis viajes</h1>
        </div>
      <table class="table" ng-show="isLoggedIn()" >
          <tr>
      <th><a href="" ng-click="order('title')">Nombre</a></th>
      <th><a href="" ng-click="order('startDate')">Fecha inicio</a></th>
      <th><a href="" ng-click="order('endDate')">Fecha fin</a></th>
      <th><a href="" ng-click="order('created_at')">Fecha de creaci贸n</a></th>
      <th>Acciones</th>
      </tr>
          <tr  ng-repeat="travel in travels | orderBy : predicate : reverse">
            
            <td style="font-size:20px; margin-left:10px;">
              <a ng-show="travel.link" href="{{travel.link}}">
                {{travel.title}}
              </a>
              <span ng-hide="travel.link">
                {{travel.title}}
              </span>
            </td>
            <td>
              {{travel.startDate | amDateFormat:'D/MM/YYYY'}}
            </td>
            <td>
              {{travel.endDate | amDateFormat:'D/MM/YYYY'}}
            </td>
            <td am-time-ago="travel.created_at">
            </td>
            <td>
              <button type="button" class="btn btn-default btn-lg">
                Detalle
              </button>
              <button type="button" class="btn btn-danger btn-lg">
                Eliminar
              </button>
            </td>
          </tr>
      </table>
      
          <form ng-submit="addTravel()"
      ng-show="isLoggedIn()" 
            style="margin-top:30px;">
            <h3>Agregar un nuevo viaje</h3>
      
            <div class="form-group input-group">
              <span class="input-group-addon" id="basic-addon1">Nombre</span>
              <input type="text"
                class="form-control"
                placeholder="nombre"
                ng-model="title"></input>
            </div>
            <div class="form-group input-group">
              <span class="input-group-addon" id="basic-addon1">fecha inicio</span>
              <input type="date"
              class="form-control"
              placeholder="fecha inicio"
              ng-model="startDate"></input>
            </div>
            <div class="form-group input-group">
              <span class="input-group-addon" id="basic-addon1">Fecha fin</span>
              <input type="date"
              class="form-control"
              placeholder="fecha fin"
              ng-model="endDate"></input>
            </div>
            <button type="submit" class="btn btn-primary">Crear</button>
          </form>
          <div ng-hide="isLoggedIn()">
             <h3>Usted necesita <a href="/#/login">iniciar sesi贸n</a> o <a href="/#/register">registrarse</a> para ver los viajes o crear uno nuevo.</h3>
          </div>
      </div>
    </script>
    <script type="text/ng-template" id="/travel.html">
      <div class="page-header">
        <h3>
          <span style="font-size:15px;" am-time-ago="travel.created_at">
          </span>
        </h3>
      </div>
      
      <div ng-repeat="comment in travel.comments | orderBy:'-upvotes'">
        <span class="glyphicon glyphicon-thumbs-up"
          ng-click="incrementUpvotes(comment)"></span>
        {{comment.upvotes}} - by {{comment.author}}
        <span style="font-size:20px; margin-left:10px;">
          {{comment.body}}
        </span>
        <span style="font-size:15px; margin-left:10px;" am-time-ago="comment.created_at">
        </span>
      </div>
      
      <form ng-submit="addComment()"
      ng-show="isLoggedIn()"
        style="margin-top:30px;">
        <h3>Add a new comment</h3>
      
        <div class="form-group">
          <input type="text"
          class="form-control"
          placeholder="Comment"
          ng-model="body"></input>
        </div>
        <button type="submit" class="btn btn-primary">Travel</button>
      </form>
      <div ng-hide="isLoggedIn()">
        <h3>Usted necesita <a href="/#/login">iniciar sesi贸n</a> o <a href="/#/register"> registrarse</a> para agergar un comentario.</h3>
      </div>
      <a type="submit" href="/#/travels" class="btn btn-default">Back</a>
    </script>
    <script type="text/ng-template" id="/register.html">
      <div ng-show="error" class="alert alert-danger row">
        <span>{{ error.message }}</span>
      </div>
      
      <form ng-submit="register()"
        style="margin-top:30px;">
        <h3>Registro</h3>
      
        <div class="form-group">
          <input type="text"
          class="form-control"
          placeholder="Username"
          ng-model="user.username"></input>
        </div>
        <div class="form-group">
          <input type="password"
          class="form-control"
          placeholder="Password"
          ng-model="user.password"></input>
        </div>
        <button type="submit" class="btn btn-primary">Registrar</button>
      </form>
    </script>
    <script type="text/ng-template" id="/login.html">
      <div ng-show="error" class="alert alert-danger row">
        <span>{{ error.message }}</span>
      </div>
      
      <form ng-submit="logIn()"
        style="margin-top:30px;">
        <h3>Log In</h3>
      
        <div class="form-group">
          <input type="text"
          class="form-control"
          placeholder="Username"
          ng-model="user.username"></input>
        </div>
        <div class="form-group">
          <input type="password"
          class="form-control"
          placeholder="Password"
          ng-model="user.password"></input>
        </div>
        <button type="submit" class="btn btn-primary">Log In</button>
      </form>
    </script>
    <script type="text/ng-template" id="/home.html">
      <div>
        <h1>Bienvenido a Vacaciones permanentes</h1>
      
        <h3>Usted necesita <a href="/#/login">iniciar sesi贸n</a> o <a href="/#/register"> registrarse</a> para poder usar el sistema.</h3>
      
      </div>
    </script>
  </body>
</html>